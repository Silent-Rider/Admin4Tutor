
2024-11-19 00:55:18 - ERROR - Cannot invoke "com.admin4tutor.bot.service.UserSession.setCurrentKeyboard(org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboard)" because the return value of "com.admin4tutor.bot.service.SessionManager.getUserSession(long)" is null
java.lang.NullPointerException: Cannot invoke "com.admin4tutor.bot.service.UserSession.setCurrentKeyboard(org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboard)" because the return value of "com.admin4tutor.bot.service.SessionManager.getUserSession(long)" is null
	at com.admin4tutor.bot.TelegramBot.sendMessage(TelegramBot.java:83)
	at com.admin4tutor.bot.TelegramBot.onUpdateReceived(TelegramBot.java:51)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.telegram.telegrambots.meta.generics.LongPollingBot.onUpdatesReceived(LongPollingBot.java:27)
	at org.telegram.telegrambots.updatesreceivers.DefaultBotSession$HandlerThread.run(DefaultBotSession.java:312)
2024-11-19 00:55:30 - ERROR - Cannot invoke "com.admin4tutor.bot.service.UserSession.setCurrentKeyboard(org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboard)" because the return value of "com.admin4tutor.bot.service.SessionManager.getUserSession(long)" is null
java.lang.NullPointerException: Cannot invoke "com.admin4tutor.bot.service.UserSession.setCurrentKeyboard(org.telegram.telegrambots.meta.api.objects.replykeyboard.ReplyKeyboard)" because the return value of "com.admin4tutor.bot.service.SessionManager.getUserSession(long)" is null
	at com.admin4tutor.bot.TelegramBot.sendMessage(TelegramBot.java:83)
	at com.admin4tutor.bot.TelegramBot.onUpdateReceived(TelegramBot.java:51)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.telegram.telegrambots.meta.generics.LongPollingBot.onUpdatesReceived(LongPollingBot.java:27)
	at org.telegram.telegrambots.updatesreceivers.DefaultBotSession$HandlerThread.run(DefaultBotSession.java:312)
2024-11-19 02:05:23 - ERROR - remove
java.lang.UnsupportedOperationException: remove
	at java.base/java.util.Iterator.remove(Iterator.java:102)
	at java.base/java.util.AbstractCollection.remove(AbstractCollection.java:285)
	at com.admin4tutor.bot.service.QuestionHandler.askForAnotherAvailabilityDay(QuestionHandler.java:88)
	at com.admin4tutor.bot.service.AnswerProcessor.processAvailabilityIntervalsAnswer(AnswerProcessor.java:117)
	at com.admin4tutor.bot.service.SessionManager.handleUserAnswer(SessionManager.java:27)
	at com.admin4tutor.bot.TelegramBot.onUpdateReceived(TelegramBot.java:54)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.telegram.telegrambots.meta.generics.LongPollingBot.onUpdatesReceived(LongPollingBot.java:27)
	at org.telegram.telegrambots.updatesreceivers.DefaultBotSession$HandlerThread.run(DefaultBotSession.java:312)
2024-11-19 02:15:17 - ERROR - class java.util.Collections$SingletonList cannot be cast to class org.telegram.telegrambots.meta.api.objects.replykeyboard.buttons.KeyboardRow (java.util.Collections$SingletonList is in module java.base of loader 'bootstrap'; org.telegram.telegrambots.meta.api.objects.replykeyboard.buttons.KeyboardRow is in unnamed module of loader 'app')
java.lang.ClassCastException: class java.util.Collections$SingletonList cannot be cast to class org.telegram.telegrambots.meta.api.objects.replykeyboard.buttons.KeyboardRow (java.util.Collections$SingletonList is in module java.base of loader 'bootstrap'; org.telegram.telegrambots.meta.api.objects.replykeyboard.buttons.KeyboardRow is in unnamed module of loader 'app')
	at com.admin4tutor.bot.service.QuestionHandler.askForEmail(QuestionHandler.java:193)
	at com.admin4tutor.bot.service.AnswerProcessor.processAnotherAvailabilityDayAnswer(AnswerProcessor.java:131)
	at com.admin4tutor.bot.service.SessionManager.handleUserAnswer(SessionManager.java:28)
	at com.admin4tutor.bot.TelegramBot.onUpdateReceived(TelegramBot.java:60)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.telegram.telegrambots.meta.generics.LongPollingBot.onUpdatesReceived(LongPollingBot.java:27)
	at org.telegram.telegrambots.updatesreceivers.DefaultBotSession$HandlerThread.run(DefaultBotSession.java:312)
2024-11-19 02:20:51 - ERROR - class java.time.format.Parsed cannot be cast to class java.time.LocalDate (java.time.format.Parsed and java.time.LocalDate are in module java.base of loader 'bootstrap')
java.lang.ClassCastException: class java.time.format.Parsed cannot be cast to class java.time.LocalDate (java.time.format.Parsed and java.time.LocalDate are in module java.base of loader 'bootstrap')
	at com.admin4tutor.bot.model.User.getAge(User.java:61)
	at com.admin4tutor.bot.model.User.toString(User.java:67)
	at com.admin4tutor.bot.model.Tutor.toString(Tutor.java:33)
	at com.admin4tutor.bot.service.AnswerProcessor.printInformation(AnswerProcessor.java:265)
	at com.admin4tutor.bot.service.AnswerProcessor.processBiographyAnswer(AnswerProcessor.java:260)
	at com.admin4tutor.bot.service.SessionManager.handleUserAnswer(SessionManager.java:36)
	at com.admin4tutor.bot.TelegramBot.onUpdateReceived(TelegramBot.java:54)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.telegram.telegrambots.meta.generics.LongPollingBot.onUpdatesReceived(LongPollingBot.java:27)
	at org.telegram.telegrambots.updatesreceivers.DefaultBotSession$HandlerThread.run(DefaultBotSession.java:312)
2024-11-19 02:40:57 - WARN - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'telegramBotsApi' defined in class path resource [com/admin4tutor/bot/config/TelegramBotConfig.class]: Failed to instantiate [org.telegram.telegrambots.meta.TelegramBotsApi]: Factory method 'telegramBotsApi' threw exception with message: Error removing old webhook
2024-11-19 02:40:57 - ERROR - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'telegramBotsApi' defined in class path resource [com/admin4tutor/bot/config/TelegramBotConfig.class]: Failed to instantiate [org.telegram.telegrambots.meta.TelegramBotsApi]: Factory method 'telegramBotsApi' threw exception with message: Error removing old webhook
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:645)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1351)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1181)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:288)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1122)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1093)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1030)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.admin4tutor.bot.TelegramBotApplication.main(TelegramBotApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.telegram.telegrambots.meta.TelegramBotsApi]: Factory method 'telegramBotsApi' threw exception with message: Error removing old webhook
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:199)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:88)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:168)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 24 common frames omitted
Caused by: org.telegram.telegrambots.meta.exceptions.TelegramApiRequestException: Error removing old webhook
	at org.telegram.telegrambots.util.WebhookUtils.clearWebhook(WebhookUtils.java:113)
	at org.telegram.telegrambots.bots.TelegramLongPollingBot.clearWebhook(TelegramLongPollingBot.java:41)
	at org.telegram.telegrambots.meta.TelegramBotsApi.registerBot(TelegramBotsApi.java:65)
	at com.admin4tutor.bot.config.TelegramBotConfig.telegramBotsApi(TelegramBotConfig.java:17)
	at com.admin4tutor.bot.config.TelegramBotConfig$$SpringCGLIB$$0.CGLIB$telegramBotsApi$0(<generated>)
	at com.admin4tutor.bot.config.TelegramBotConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:348)
	at com.admin4tutor.bot.config.TelegramBotConfig$$SpringCGLIB$$0.telegramBotsApi(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:171)
	... 27 common frames omitted
Caused by: org.telegram.telegrambots.meta.exceptions.TelegramApiException: Unable to execute deleteWebhook method
	at org.telegram.telegrambots.bots.DefaultAbsSender.sendApiMethod(DefaultAbsSender.java:1184)
	at org.telegram.telegrambots.meta.bots.AbsSender.execute(AbsSender.java:61)
	at org.telegram.telegrambots.util.WebhookUtils.clearWebhook(WebhookUtils.java:108)
	... 38 common frames omitted
Caused by: javax.net.ssl.SSLHandshakeException: Remote host terminated the handshake
	at java.base/sun.security.ssl.SSLSocketImpl.handleEOF(SSLSocketImpl.java:1714)
	at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1514)
	at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1421)
	at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:455)
	at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:426)
	at org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:436)
	at org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:384)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
	at org.telegram.telegrambots.bots.DefaultAbsSender.sendHttpPostRequest(DefaultAbsSender.java:1216)
	at org.telegram.telegrambots.bots.DefaultAbsSender.sendMethodRequest(DefaultAbsSender.java:1212)
	at org.telegram.telegrambots.bots.DefaultAbsSender.sendApiMethod(DefaultAbsSender.java:1181)
	... 40 common frames omitted
Caused by: java.io.EOFException: SSL peer shut down incorrectly
	at java.base/sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:494)
	at java.base/sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:483)
	at java.base/sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:160)
	at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:111)
	at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1506)
	... 57 common frames omitted
2024-11-19 02:44:14 - ERROR - TelegramApiException occurred while sending a message to user: 1050352194
org.telegram.telegrambots.meta.exceptions.TelegramApiRequestException: Error executing org.telegram.telegrambots.meta.api.methods.send.SendMessage query: [400] Bad Request: can't parse inline keyboard button: Text buttons are unallowed in the inline keyboard
	at org.telegram.telegrambots.meta.api.methods.PartialBotApiMethod.deserializeResponseInternal(PartialBotApiMethod.java:54)
	at org.telegram.telegrambots.meta.api.methods.PartialBotApiMethod.deserializeResponse(PartialBotApiMethod.java:34)
	at org.telegram.telegrambots.meta.api.methods.botapimethods.BotApiMethodMessage.deserializeResponse(BotApiMethodMessage.java:20)
	at org.telegram.telegrambots.meta.api.methods.botapimethods.BotApiMethodMessage.deserializeResponse(BotApiMethodMessage.java:15)
	at org.telegram.telegrambots.bots.DefaultAbsSender.sendApiMethod(DefaultAbsSender.java:1182)
	at org.telegram.telegrambots.meta.bots.AbsSender.execute(AbsSender.java:61)
	at com.admin4tutor.bot.TelegramBot.sendMessage(TelegramBot.java:85)
	at com.admin4tutor.bot.service.QuestionHandler.askForTutor(QuestionHandler.java:173)
	at com.admin4tutor.bot.service.AnswerProcessor.processAnotherScheduleDayAnswer(AnswerProcessor.java:190)
	at com.admin4tutor.bot.service.SessionManager.handleUserAnswer(SessionManager.java:31)
	at com.admin4tutor.bot.TelegramBot.onUpdateReceived(TelegramBot.java:60)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.telegram.telegrambots.meta.generics.LongPollingBot.onUpdatesReceived(LongPollingBot.java:27)
	at org.telegram.telegrambots.updatesreceivers.DefaultBotSession$HandlerThread.run(DefaultBotSession.java:312)
